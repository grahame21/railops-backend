      - name: Sanity check file contents
        run: |
          echo "Root:"
          ls -la
          echo "scripts/:"
          ls -la scripts || true
          echo "----- scripts/fetch_trains.py (head) -----"
          sed -n '1,30p' scripts/fetch_trains.py || true
          echo "------------------------------------------"

      - name: First fetch -> deploy/trains.json
        env:
          TRAINFINDER_VIEWPORT_URL: ${{ secrets.TRAINFINDER_VIEWPORT_URL }}
          TRAINFINDER_ASPXAUTH: ${{ secrets.TRAINFINDER_ASPXAUTH }}
          TRAINFINDER_METHOD: ${{ secrets.TRAINFINDER_METHOD }}
          TRAINFINDER_POST_BODY: ${{ secrets.TRAINFINDER_POST_BODY }}
          TRAINFINDER_HEADERS_JSON: ${{ secrets.TRAINFINDER_HEADERS_JSON }}
          TRAINFINDER_COOKIE_RAW: ${{ secrets.TRAINFINDER_COOKIE_RAW }}
        run: |
          python scripts/fetch_trains.py

      - name: Wait 30 seconds
        run: sleep 30

      - name: Second fetch -> update file again
        env:
          TRAINFINDER_VIEWPORT_URL: ${{ secrets.TRAINFINDER_VIEWPORT_URL }}
          TRAINFINDER_ASPXAUTH: ${{ secrets.TRAINFINDER_ASPXAUTH }}
          TRAINFINDER_METHOD: ${{ secrets.TRAINFINDER_METHOD }}
          TRAINFINDER_POST_BODY: ${{ secrets.TRAINFINDER_POST_BODY }}
          TRAINFINDER_HEADERS_JSON: ${{ secrets.TRAINFINDER_HEADERS_JSON }}
          TRAINFINDER_COOKIE_RAW: ${{ secrets.TRAINFINDER_COOKIE_RAW }}
        run: |
          python scripts/fetch_trains.py
